#!/usr/bin/env bash
# Skip hooks in CI
if [ -n "$CI" ]; then
	exit 0
fi

# Run repository checks first
if command -v npm >/dev/null 2>&1; then
	npm run check:repo || { echo "Repo checks failed"; exit 1; }
fi

# Run lint-staged to auto-fix staged files
npx --no-install lint-staged || { echo "lint-staged failed"; exit 1; }
